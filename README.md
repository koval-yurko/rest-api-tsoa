# TypeScript Express API with tsoa

A minimal TypeScript project using Express framework and tsoa for OpenAPI specification generation.

## Features

- **TypeScript**: Full TypeScript support with strict type checking
- **Express**: Fast, unopinionated web framework for Node.js
- **tsoa**: Automatic OpenAPI/Swagger specification generation from TypeScript decorators
- **Swagger UI**: Interactive API documentation playground at `/docs`
- **Custom Types**: Well-defined request/response models
- **Multiple Controllers**: Example controllers for Users and Products
- **CRUD Operations**: Complete Create, Read, Update, Delete operations
- **Search & Filtering**: Advanced query parameters and filtering
- **Error Handling**: Consistent error responses
- **Documentation**: Auto-generated API documentation

## Project Structure

```
├── src/
│   ├── controllers/          # API controllers
│   │   ├── UserController.ts
│   │   └── ProductController.ts
│   ├── models/              # TypeScript interfaces and types
│   │   ├── User.ts
│   │   ├── Product.ts
│   │   └── Common.ts
│   ├── routes/              # Generated routes (auto-generated by tsoa)
│   ├── authentication.ts    # Authentication logic
│   └── app.ts              # Express application setup
├── dist/                   # Compiled JavaScript (generated)
├── package.json
├── tsconfig.json
├── tsoa.json
└── README.md
```

## Installation

1. Install dependencies:
```bash
npm install
```

2. Generate OpenAPI spec and routes:
```bash
npm run generate-spec
```

3. Build the project:
```bash
npm run build
```

## Available Scripts

- `npm run build` - Compile TypeScript to JavaScript
- `npm run start` - Start the production server
- `npm run dev` - Start development server with ts-node
- `npm run generate-spec` - Generate OpenAPI spec and routes
- `npm run generate-routes` - Generate routes only
- `npm run generate-swagger` - Generate OpenAPI spec only

## Running the Application

### Development Mode
```bash
npm run dev
```

### Production Mode
```bash
npm run build
npm start
```

The server will start on `http://localhost:3000`

## API Endpoints

### Health Check
- `GET /health` - Check API health status

### Users API
- `GET /api/users` - Get all users (with pagination)
- `GET /api/users/{userId}` - Get user by ID
- `POST /api/users` - Create new user
- `PUT /api/users/{userId}` - Update user
- `DELETE /api/users/{userId}` - Delete user

### Products API
- `GET /api/products` - Get all products (with pagination)
- `GET /api/products/search` - Search products with filters
- `GET /api/products/categories` - Get available categories
- `GET /api/products/{productId}` - Get product by ID
- `POST /api/products` - Create new product
- `PUT /api/products/{productId}` - Update product
- `DELETE /api/products/{productId}` - Delete product

### Documentation
- `GET /swagger.json` - OpenAPI specification
- `GET /docs` - Interactive Swagger UI playground

## Example API Calls

### Create a User
```bash
curl -X POST http://localhost:3000/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "email": "john.doe@example.com",
    "firstName": "John",
    "lastName": "Doe",
    "age": 30
  }'
```

### Search Products
```bash
curl "http://localhost:3000/api/products/search?category=electronics&minPrice=5000&maxPrice=100000&page=1&limit=10"
```

### Get User by ID
```bash
curl http://localhost:3000/api/users/1
```

## Custom Types

### User Types
- `User` - Complete user object
- `CreateUserRequest` - User creation payload
- `UpdateUserRequest` - User update payload
- `UserResponse` - Single user response
- `UsersResponse` - Multiple users response

### Product Types
- `Product` - Complete product object
- `ProductCategory` - Enum for product categories
- `CreateProductRequest` - Product creation payload
- `UpdateProductRequest` - Product update payload
- `ProductSearchQuery` - Search query parameters
- `ProductResponse` - Single product response
- `ProductsResponse` - Multiple products response

### Common Types
- `ErrorResponse` - Standard error response
- `SuccessResponse<T>` - Generic success response
- `PaginatedResponse<T>` - Paginated response with metadata

## OpenAPI Specification

The OpenAPI specification is automatically generated from TypeScript decorators and can be accessed at:
- `http://localhost:3000/swagger.json` - Raw OpenAPI JSON specification
- `http://localhost:3000/docs` - Interactive Swagger UI playground

The specification includes:
- All endpoints with request/response schemas
- Parameter descriptions and examples
- Error response definitions
- Model definitions with validation rules

### Using Swagger UI

The Swagger UI at `/docs` provides an interactive playground where you can:
- Browse all available API endpoints
- View detailed request/response schemas
- Test API endpoints directly from the browser
- See example requests and responses
- Understand authentication requirements

## Authentication

The project includes a simple authentication example using API keys. To use authenticated endpoints:

1. Add `x-api-key: demo-api-key` header to your requests
2. Or add `?apiKey=demo-api-key` query parameter

## Development Notes

- All controllers extend the tsoa `Controller` class
- Use tsoa decorators (`@Route`, `@Get`, `@Post`, etc.) for API definition
- Custom types are defined in the `models/` directory
- The `tsoa.json` file configures OpenAPI generation
- Routes are automatically generated in `src/openapi/routes.ts`

## Next Steps

To extend this project:

1. Add a real database (PostgreSQL, MongoDB, etc.)
2. Implement proper authentication (JWT, OAuth)
3. Add input validation middleware
4. Add logging (Winston, Morgan)
5. Add testing (Jest, Supertest)
6. Add Docker configuration
7. Add environment configuration
8. Add rate limiting
9. Add API versioning
10. Add comprehensive error handling